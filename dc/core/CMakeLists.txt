
# Copyright (c) 2013-2015, EPFL/Blue Brain Project
#                     Raphael Dumusc <raphael.dumusc@epfl.ch>

include_directories(${CMAKE_CURRENT_SOURCE_DIR})

set(DCCORE_LINK_LIBRARIES
  PUBLIC
    Deflect
    dcwebservice
    Qt5::Core
    Qt5::Declarative
    Qt5::Widgets
    ${Boost_LIBRARIES}
    ${MPI_CXX_LIBRARIES}
  PRIVATE
    Qt5::OpenGL
    Qt5::Svg
    Qt5::Quick
    Qt5::WebKitWidgets
    Qt5::Xml
    Qt5::XmlPatterns
    ${OPENGL_LIBRARIES}
    ${FFMPEG_LIBRARIES}
)

if(ENABLE_TUIO_TOUCH_LISTENER)
  list(APPEND DCCORE_MOC_PUBLIC_HEADERS MultiTouchListener.h)
  list(APPEND DCCORE_SOURCES MultiTouchListener.cpp)
  list(APPEND DCCORE_LINK_LIBRARIES PUBLIC TUIO)
endif()

if(ENABLE_PDF_SUPPORT)
  list(APPEND DCCORE_MOC_PUBLIC_HEADERS
    PDFContent.h
  )
  list(APPEND DCCORE_SOURCES
    PDF.cpp
    PDFContent.cpp
    PDFInteractionDelegate.cpp
    thumbnail/PDFThumbnailGenerator.cpp
  )
  list(APPEND DCCORE_LINK_LIBRARIES PRIVATE ${POPPLER_LIBRARIES})
endif()

list(APPEND DCCORE_PUBLIC_HEADERS
  types.h
  ContentFactory.h
  ContentLoader.h
  ContentType.h
  Drawable.h
  DynamicTexture.h
  DynamicTextureContent.h
  ElapsedTimer.h
  FFMPEGFrame.h
  FFMPEGMovie.h
  FFMPEGVideoFrameConverter.h
  FFMPEGVideoStream.h
  FileCommandHandler.h
  FpsCounter.h
  FpsRenderer.h
  GLQuad.h
  GLTexture2D.h
  GLUtils.h
  GLWindow.h
  gestures/DoubleTapGestureRecognizer.h
  gestures/PanGesture.h
  gestures/PanGestureRecognizer.h
  gestures/PinchGesture.h
  gestures/PinchGestureRecognizer.h
  LayoutEngine.h
  log.h
  Marker.h
  Movie.h
  MPIChannel.h
  MPIContext.h
  MPINospin.h
  PixelStreamContent.h
  PixelStreamSegmentRenderer.h
  QmlWindowRenderer.h
  qmlUtils.h
  Renderable.h
  RenderContext.h
  SessionCommandHandler.h
  State.h
  StatePreview.h
  StateSerializationHelper.h
  SVG.h
  SVGContent.h
  TestPattern.h
  Texture.h
  TextureContent.h
  WallContent.h
  ZoomInteractionDelegate.h
  configuration/Configuration.h
  configuration/MasterConfiguration.h
  configuration/WallConfiguration.h
  localstreamer/CommandLineOptions.h
  localstreamer/DockToolbar.h
  localstreamer/PixelStreamerFactory.h
  localstreamer/PixelStreamerType.h
  thumbnail/DefaultThumbnailGenerator.h
  thumbnail/FolderThumbnailGenerator.h
  thumbnail/ImageThumbnailGenerator.h
  thumbnail/MovieThumbnailGenerator.h
  thumbnail/PyramidThumbnailGenerator.h
  thumbnail/StateThumbnailGenerator.h
  thumbnail/ThumbnailGenerator.h
  thumbnail/ThumbnailGeneratorFactory.h
  ws/AsciiToQtKeyCodeMapper.h
  ws/DisplayGroupAdapter.h
)

list(APPEND DCCORE_MOC_PUBLIC_HEADERS
  Content.h
  ContentAction.h
  ContentActionsModel.h
  ContentInteractionDelegate.h
  ContentItem.h
  ContentWindow.h
  ContentWindowController.h
  Coordinates.h
  DisplayGroup.h
  DisplayGroupRenderer.h
  Markers.h
  MarkerRenderer.h
  MasterFromWallChannel.h
  MasterToWallChannel.h
  MovieContent.h
  Options.h
  PixelStream.h
  PixelStreamInteractionDelegate.h
  PixelStreamUpdater.h
  PixelStreamWindowManager.h
  QmlControlPanel.h
  RenderController.h
  WallFromMasterChannel.h
  WallGraphicsScene.h
  WallWindow.h
  WallToMasterChannel.h
  WallToWallChannel.h
  WebbrowserCommandHandler.h
  localstreamer/AsyncImageLoader.h
  localstreamer/DockPixelStreamer.h
  localstreamer/PixelStreamer.h
  localstreamer/PixelStreamerLauncher.h
  localstreamer/Pictureflow.h
  localstreamer/WebkitAuthenticationHelper.h
  localstreamer/WebkitHtmlSelectReplacer.h
  localstreamer/WebkitPixelStreamer.h
  ws/TextInputDispatcher.h
  ws/TextInputHandler.h
  ws/WebServiceServer.h
)

list(APPEND DCCORE_SOURCES
  Content.cpp
  ContentAction.cpp
  ContentActionsModel.cpp
  ContentFactory.cpp
  ContentLoader.cpp
  ContentType.cpp
  ContentItem.cpp
  ContentInteractionDelegate.cpp
  ContentWindow.cpp
  ContentWindowController.cpp
  Coordinates.cpp
  DisplayGroup.cpp
  DisplayGroupRenderer.cpp
  DynamicTexture.cpp
  DynamicTextureContent.cpp
  ElapsedTimer.cpp
  FFMPEGFrame.cpp
  FFMPEGMovie.cpp
  FFMPEGVideoFrameConverter.cpp
  FFMPEGVideoStream.cpp
  FileCommandHandler.cpp
  FpsCounter.cpp
  FpsRenderer.cpp
  GLQuad.cpp
  GLTexture2D.cpp
  GLUtils.cpp
  GLWindow.cpp
  LayoutEngine.cpp
  log.cpp
  Marker.cpp
  Markers.cpp
  MarkerRenderer.cpp
  MasterFromWallChannel.cpp
  MasterToWallChannel.cpp
  MetaTypeRegistration.cpp
  Movie.cpp
  MovieContent.cpp
  MPIChannel.cpp
  MPIContext.cpp
  MPINospin.cpp
  Options.cpp
  PixelStream.cpp
  PixelStreamContent.cpp
  PixelStreamInteractionDelegate.cpp
  PixelStreamSegmentRenderer.cpp
  PixelStreamUpdater.cpp
  PixelStreamWindowManager.cpp
  QmlControlPanel.cpp
  QmlWindowRenderer.cpp
  QmlTypeRegistration.cpp
  RenderContext.cpp
  RenderController.cpp
  SessionCommandHandler.cpp
  State.cpp
  StatePreview.cpp
  StateSerializationHelper.cpp
  SVG.cpp
  SVGContent.cpp
  TestPattern.cpp
  Texture.cpp
  TextureContent.cpp
  WallContent.cpp
  WallFromMasterChannel.cpp
  WallGraphicsScene.cpp
  WallToMasterChannel.cpp
  WallToWallChannel.cpp
  WallWindow.cpp
  WebbrowserCommandHandler.cpp
  ZoomInteractionDelegate.cpp
  configuration/Configuration.cpp
  configuration/MasterConfiguration.cpp
  configuration/WallConfiguration.cpp
  gestures/DoubleTapGestureRecognizer.cpp
  gestures/PanGesture.cpp
  gestures/PanGestureRecognizer.cpp
  gestures/PinchGesture.cpp
  gestures/PinchGestureRecognizer.cpp
  localstreamer/AsyncImageLoader.cpp
  localstreamer/CommandLineOptions.cpp
  localstreamer/DockPixelStreamer.cpp
  localstreamer/DockToolbar.cpp
  localstreamer/PixelStreamer.cpp
  localstreamer/PixelStreamerFactory.cpp
  localstreamer/PixelStreamerLauncher.cpp
  localstreamer/PixelStreamerType.cpp
  localstreamer/Pictureflow.cpp
  localstreamer/WebkitAuthenticationHelper.cpp
  localstreamer/WebkitHtmlSelectReplacer.cpp
  localstreamer/WebkitPixelStreamer.cpp
  thumbnail/DefaultThumbnailGenerator.cpp
  thumbnail/FolderThumbnailGenerator.cpp
  thumbnail/ImageThumbnailGenerator.cpp
  thumbnail/MovieThumbnailGenerator.cpp
  thumbnail/PyramidThumbnailGenerator.cpp
  thumbnail/StateThumbnailGenerator.cpp
  thumbnail/ThumbnailGenerator.cpp
  thumbnail/ThumbnailGeneratorFactory.cpp
  ws/AsciiToQtKeyCodeMapper.cpp
  ws/DisplayGroupAdapter.cpp
  ws/TextInputDispatcher.cpp
  ws/TextInputHandler.cpp
  ws/WebServiceServer.cpp
)

set(DCCORE_RESOURCES resources/core.qrc)

set(DCCORE_INCLUDE_NAME dc/core)
common_library(dccore)
